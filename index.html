<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Gemora Global | Store</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-900 font-sans">

<!-- Header -->
<header class="bg-black text-yellow-500 p-6 flex justify-between items-center shadow-md sticky top-0 z-10">
  <h1 class="text-2xl font-bold tracking-wide">GEMORA GLOBAL</h1>
  <a href="checkout.html" class="bg-yellow-500 text-black px-4 py-2 rounded font-semibold">
    ðŸ›’ Cart (<span id="cart-count">0</span>)
  </a>
</header>

<!-- Hero Section -->
<section class="bg-yellow-50 py-12 text-center">
  <h2 class="text-3xl font-bold text-yellow-700 mb-3">Timeless Crochet, Handmade with Love ðŸ’›</h2>
  <p class="text-gray-600">Shop our collection of handmade crochet shrugs, bags, and accessories.</p>
</section>

<!-- Products Grid -->
<main class="max-w-6xl mx-auto p-6 grid sm:grid-cols-2 md:grid-cols-3 gap-8" id="product-list">
  <p class="col-span-full text-center text-gray-500">Loading products...</p>
</main>

<!-- Footer -->
<footer class="bg-black text-yellow-500 py-6 text-center text-sm">
  Â© <span id="year"></span> Gemora Global. All Rights Reserved.
</footer>

<script>
const API_URL = "http://localhost:3000/api/products";
let cart = JSON.parse(localStorage.getItem("cart")) || [];

document.getElementById("year").textContent = new Date().getFullYear();

async function loadProducts() {
  try {
    const res = await fetch(API_URL);
    const products = await res.json();
    const container = document.getElementById("product-list");
    container.innerHTML = "";
    if (!products.length) {
      container.innerHTML = "<p class='col-span-full text-center text-gray-500'>No products available.</p>";
      return;
    }

    products.forEach(p => {
      const card = document.createElement("div");
      card.className = "bg-white shadow-lg rounded-xl overflow-hidden hover:shadow-xl transition";
      card.innerHTML = `
        <img src="${p.image}" alt="${p.name}" class="w-full h-60 object-cover">
        <div class="p-4">
          <h3 class="font-semibold text-lg mb-1">${p.name}</h3>
          <p class="text-yellow-600 font-bold mb-3">â‚¦${p.price.toLocaleString()}</p>
          <button onclick="addToCart(${p.id}, '${p.name}', ${p.price}, '${p.image}')" class="w-full bg-black text-yellow-500 py-2 rounded font-semibold hover:bg-yellow-500 hover:text-black transition">
            Add to Cart
          </button>
        </div>
      `;
      container.appendChild(card);
    });
  } catch {
    document.getElementById("product-list").innerHTML = "<p class='col-span-full text-center text-red-500'>Failed to load products.</p>";
  }
}

function addToCart(id, name, price, image) {
  const existing = cart.find(i => i.id === id);
  if (existing) existing.qty++;
  else cart.push({ id, name, price, image, qty: 1 });
  localStorage.setItem("cart", JSON.stringify(cart));
  updateCartCount();
}

function updateCartCount() {
  document.getElementById("cart-count").textContent = cart.reduce((a, b) => a + b.qty, 0);
}

loadProducts();
updateCartCount();
</script>
</body>
</html>
